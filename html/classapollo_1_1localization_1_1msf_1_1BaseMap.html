<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Apollo: apollo::localization::msf::BaseMap Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Apollo
   &#160;<span id="projectnumber">6.0</span>
   </div>
   <div id="projectbrief">Open source self driving car software</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceapollo.html">apollo</a></li><li class="navelem"><a class="el" href="namespaceapollo_1_1localization.html">localization</a></li><li class="navelem"><a class="el" href="namespaceapollo_1_1localization_1_1msf.html">msf</a></li><li class="navelem"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMap.html">BaseMap</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classapollo_1_1localization_1_1msf_1_1BaseMap-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">apollo::localization::msf::BaseMap Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The data structure of the base map.  
 <a href="classapollo_1_1localization_1_1msf_1_1BaseMap.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="local__map_2base__map_2base__map_8h_source.html">base_map.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for apollo::localization::msf::BaseMap:</div>
<div class="dyncontent">
<div class="center"><img src="classapollo_1_1localization_1_1msf_1_1BaseMap__inherit__graph.png" border="0" usemap="#apollo_1_1localization_1_1msf_1_1BaseMap_inherit__map" alt="Inheritance graph"/></div>
<map name="apollo_1_1localization_1_1msf_1_1BaseMap_inherit__map" id="apollo_1_1localization_1_1msf_1_1BaseMap_inherit__map">
<area shape="rect" id="node2" href="classapollo_1_1localization_1_1msf_1_1LosslessMap.html" title="{apollo::localization\l::msf::LosslessMap\n||+ LosslessMap()\l+ ~LosslessMap()\l+ SetValue()\l+ SetValueLayer()\l+ GetValue()\l+ GetValueSafe()\l+ GetVar()\l+ GetVarSafe()\l+ GetAlt()\l+ GetAltSafe()\land 17 more...\l}" alt="" coords="5,527,151,765"/>
<area shape="rect" id="node3" href="classapollo_1_1localization_1_1msf_1_1LossyMap2D.html" title="{apollo::localization\l::msf::LossyMap2D\n||+ LossyMap2D()\l+ ~LossyMap2D()\l+ PreloadMapArea()\l+ LoadMapArea()\l}" alt="" coords="175,578,328,714"/>
<area shape="rect" id="node4" href="classapollo_1_1localization_1_1msf_1_1NdtMap.html" title="{apollo::localization\l::msf::NdtMap\n||+ NdtMap()\l+ ~NdtMap()\l+ PreloadMapArea()\l+ LoadMapArea()\l}" alt="" coords="352,578,505,714"/>
</map>
</div>
<div class="dynheader">
Collaboration diagram for apollo::localization::msf::BaseMap:</div>
<div class="dyncontent">
<div class="center"><img src="classapollo_1_1localization_1_1msf_1_1BaseMap__coll__graph.png" border="0" usemap="#apollo_1_1localization_1_1msf_1_1BaseMap_coll__map" alt="Collaboration graph"/></div>
<map name="apollo_1_1localization_1_1msf_1_1BaseMap_coll__map" id="apollo_1_1localization_1_1msf_1_1BaseMap_coll__map">
<area shape="rect" id="node2" href="classapollo_1_1localization_1_1msf_1_1BaseMapConfig.html" title="The options of the reflectance map. " alt="" coords="69,307,286,575"/>
<area shape="rect" id="node5" href="classapollo_1_1localization_1_1msf_1_1BaseMapNodePool.html" title="The memory pool for the data structure of BaseMapNode. " alt="" coords="277,667,461,920"/>
<area shape="rect" id="node3" href="classapollo_1_1localization_1_1msf_1_1Rect2D.html" title="{apollo::localization\l::msf::Rect2D\&lt; double \&gt;\n||+ Rect2D()\l+ Rect2D()\l+ Rect2D()\l+ operator=()\l+ GetMinX()\l+ GetMinY()\l+ GetMaxX()\l+ GetMaxY()\l+ GetLeftTopCorner()\l+ GetRightBottomCorner()\l}" alt="" coords="5,5,200,229"/>
<area shape="rect" id="node6" href="classapollo_1_1localization_1_1msf_1_1MapNodeCache.html" title="{apollo::localization\l::msf::MapNodeCache\&lt;\l apollo::localization\l::msf::MapNodeIndex, apollo\l::localization::msf::BaseMapNode \&gt;\n||+ MapNodeCache()\l+ ~MapNodeCache()\l+ Get()\l+ GetSilent()\l+ Put()\l+ Remove()\l+ ClearOne()\l+ IsExist()\l+ ChangeCapacity()\l+ Size()\l+ Capacity()\l+ CacheL1Destroy()\l+ CacheL2Destroy()\l}" alt="" coords="486,637,741,949"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad8447972a3be27ddc71dde7e4a146407"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMap.html#ad8447972a3be27ddc71dde7e4a146407">BaseMap</a> (<a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMapConfig.html">BaseMapConfig</a> *map_config)</td></tr>
<tr class="memdesc:ad8447972a3be27ddc71dde7e4a146407"><td class="mdescLeft">&#160;</td><td class="mdescRight">The constructor.  <a href="#ad8447972a3be27ddc71dde7e4a146407">More...</a><br /></td></tr>
<tr class="separator:ad8447972a3be27ddc71dde7e4a146407"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40fc1c2afcba1ecd8ec39a770962163b"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMap.html#a40fc1c2afcba1ecd8ec39a770962163b">~BaseMap</a> ()</td></tr>
<tr class="memdesc:a40fc1c2afcba1ecd8ec39a770962163b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The destructor.  <a href="#a40fc1c2afcba1ecd8ec39a770962163b">More...</a><br /></td></tr>
<tr class="separator:a40fc1c2afcba1ecd8ec39a770962163b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8fe3c29347bcba53f82c79e3547cc3a"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMap.html#aa8fe3c29347bcba53f82c79e3547cc3a">InitMapNodeCaches</a> (int cacheL1_size, int cahceL2_size)</td></tr>
<tr class="memdesc:aa8fe3c29347bcba53f82c79e3547cc3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Init load threadpool and preload threadpool.  <a href="#aa8fe3c29347bcba53f82c79e3547cc3a">More...</a><br /></td></tr>
<tr class="separator:aa8fe3c29347bcba53f82c79e3547cc3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26dc0bdfe44b29f872af6f09a8272676"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMapNode.html">BaseMapNode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMap.html#a26dc0bdfe44b29f872af6f09a8272676">GetMapNode</a> (const <a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeIndex.html">MapNodeIndex</a> &amp;index)</td></tr>
<tr class="memdesc:a26dc0bdfe44b29f872af6f09a8272676"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the map node, if it's not in the cache, return false.  <a href="#a26dc0bdfe44b29f872af6f09a8272676">More...</a><br /></td></tr>
<tr class="separator:a26dc0bdfe44b29f872af6f09a8272676"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26a8465b14b43b83a39408371d1837db"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMapNode.html">BaseMapNode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMap.html#a26a8465b14b43b83a39408371d1837db">GetMapNodeSafe</a> (const <a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeIndex.html">MapNodeIndex</a> &amp;index)</td></tr>
<tr class="memdesc:a26a8465b14b43b83a39408371d1837db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the map node, if it's not in the cache, safely load it.  <a href="#a26a8465b14b43b83a39408371d1837db">More...</a><br /></td></tr>
<tr class="separator:a26a8465b14b43b83a39408371d1837db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3f589d02e2797a038890b00924dc127"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMap.html#ac3f589d02e2797a038890b00924dc127">IsMapNodeExist</a> (const <a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeIndex.html">MapNodeIndex</a> &amp;index) const</td></tr>
<tr class="memdesc:ac3f589d02e2797a038890b00924dc127"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the map node in the cache.  <a href="#ac3f589d02e2797a038890b00924dc127">More...</a><br /></td></tr>
<tr class="separator:ac3f589d02e2797a038890b00924dc127"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3401cf69c718282a85bd06d93c16c08"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMap.html#ab3401cf69c718282a85bd06d93c16c08">SetMapFolderPath</a> (const std::string folder_path)</td></tr>
<tr class="memdesc:ab3401cf69c718282a85bd06d93c16c08"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the directory of the map.  <a href="#ab3401cf69c718282a85bd06d93c16c08">More...</a><br /></td></tr>
<tr class="separator:ab3401cf69c718282a85bd06d93c16c08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22cf8470ad5fd8bde9157ec0a89bc31f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMap.html#a22cf8470ad5fd8bde9157ec0a89bc31f">AddDataset</a> (const std::string dataset_path)</td></tr>
<tr class="memdesc:a22cf8470ad5fd8bde9157ec0a89bc31f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a dataset path to the map config.  <a href="#a22cf8470ad5fd8bde9157ec0a89bc31f">More...</a><br /></td></tr>
<tr class="separator:a22cf8470ad5fd8bde9157ec0a89bc31f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a660769d0dee5a5ad1ce9d54570b5ea1c"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMap.html#a660769d0dee5a5ad1ce9d54570b5ea1c">PreloadMapArea</a> (const Eigen::Vector3d &amp;location, const Eigen::Vector3d &amp;trans_diff, unsigned int resolution_id, unsigned int zone_id)</td></tr>
<tr class="memdesc:a660769d0dee5a5ad1ce9d54570b5ea1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Preload map nodes for the next frame location calculation. It will forecasts the nodes by the direction of the car moving. Because the progress of loading will cost a long time (over 100ms), it must do this for a period of time in advance. After the index of nodes calculate finished, it will create loading tasks, but will not wait for the loading finished, eigen version.  <a href="#a660769d0dee5a5ad1ce9d54570b5ea1c">More...</a><br /></td></tr>
<tr class="separator:a660769d0dee5a5ad1ce9d54570b5ea1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a698a0daf6f739cacd41595b449a44cc7"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMap.html#a698a0daf6f739cacd41595b449a44cc7">LoadMapArea</a> (const Eigen::Vector3d &amp;seed_pt3d, unsigned int resolution_id, unsigned int zone_id, int filter_size_x, int filter_size_y)</td></tr>
<tr class="memdesc:a698a0daf6f739cacd41595b449a44cc7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load map nodes for the location calculate of this frame. If the forecasts are correct in last frame, these nodes will be all in cache, if not, then need to create loading tasks, and wait for the loading finish, in order to the nodes which the following calculate needed are all in the memory, eigen version.  <a href="#a698a0daf6f739cacd41595b449a44cc7">More...</a><br /></td></tr>
<tr class="separator:a698a0daf6f739cacd41595b449a44cc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79699d9bc4edb50def3a9fd02a704dbe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMap.html#a79699d9bc4edb50def3a9fd02a704dbe">AttachMapNodePool</a> (<a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMapNodePool.html">BaseMapNodePool</a> *p_map_node_pool)</td></tr>
<tr class="memdesc:a79699d9bc4edb50def3a9fd02a704dbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attach map node pointer.  <a href="#a79699d9bc4edb50def3a9fd02a704dbe">More...</a><br /></td></tr>
<tr class="separator:a79699d9bc4edb50def3a9fd02a704dbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41e63827d7214731fcc6a6d97bee906d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMap.html#a41e63827d7214731fcc6a6d97bee906d">WriteBinary</a> (FILE *file)</td></tr>
<tr class="memdesc:a41e63827d7214731fcc6a6d97bee906d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write all the map nodes to a single binary file stream. It's for binary streaming or packing.  <a href="#a41e63827d7214731fcc6a6d97bee906d">More...</a><br /></td></tr>
<tr class="separator:a41e63827d7214731fcc6a6d97bee906d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bc0e828631218152a384446e3cec296"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMap.html#a8bc0e828631218152a384446e3cec296">LoadBinary</a> (FILE *file, std::string map_folder_path=&quot;&quot;)</td></tr>
<tr class="memdesc:a8bc0e828631218152a384446e3cec296"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load all the map nodes from a single binary file stream. It's for binary streaming or packing.  <a href="#a8bc0e828631218152a384446e3cec296">More...</a><br /></td></tr>
<tr class="separator:a8bc0e828631218152a384446e3cec296"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a8727c45d433058515c0b7a274abb5f"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMapConfig.html">BaseMapConfig</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMap.html#a5a8727c45d433058515c0b7a274abb5f">GetConfig</a> () const</td></tr>
<tr class="memdesc:a5a8727c45d433058515c0b7a274abb5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the map config.  <a href="#a5a8727c45d433058515c0b7a274abb5f">More...</a><br /></td></tr>
<tr class="separator:a5a8727c45d433058515c0b7a274abb5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad918c401af56adfe6f8579d21149fcbf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMapConfig.html">BaseMapConfig</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMap.html#ad918c401af56adfe6f8579d21149fcbf">GetConfig</a> ()</td></tr>
<tr class="memdesc:ad918c401af56adfe6f8579d21149fcbf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the map config.  <a href="#ad918c401af56adfe6f8579d21149fcbf">More...</a><br /></td></tr>
<tr class="separator:ad918c401af56adfe6f8579d21149fcbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ab69df09d4e885a2ab68372cedfd7359e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMap.html#ab69df09d4e885a2ab68372cedfd7359e">LoadMapNodes</a> (std::set&lt; <a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeIndex.html">MapNodeIndex</a> &gt; *map_ids)</td></tr>
<tr class="memdesc:ab69df09d4e885a2ab68372cedfd7359e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load map node by index.  <a href="#ab69df09d4e885a2ab68372cedfd7359e">More...</a><br /></td></tr>
<tr class="separator:ab69df09d4e885a2ab68372cedfd7359e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8b00f3ec91ebde20dda20f527b43765"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMap.html#ab8b00f3ec91ebde20dda20f527b43765">PreloadMapNodes</a> (std::set&lt; <a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeIndex.html">MapNodeIndex</a> &gt; *map_ids)</td></tr>
<tr class="memdesc:ab8b00f3ec91ebde20dda20f527b43765"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load map node by index.  <a href="#ab8b00f3ec91ebde20dda20f527b43765">More...</a><br /></td></tr>
<tr class="separator:ab8b00f3ec91ebde20dda20f527b43765"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1f57a2b18ec5c61c60e6281fc313aa3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMap.html#ae1f57a2b18ec5c61c60e6281fc313aa3">LoadMapNodeThreadSafety</a> (<a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeIndex.html">MapNodeIndex</a> index, bool is_reserved=false)</td></tr>
<tr class="memdesc:ae1f57a2b18ec5c61c60e6281fc313aa3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load map node by index, thread_safety.  <a href="#ae1f57a2b18ec5c61c60e6281fc313aa3">More...</a><br /></td></tr>
<tr class="separator:ae1f57a2b18ec5c61c60e6281fc313aa3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a42978d763977cb16d2d7aabbc17686ba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMapConfig.html">BaseMapConfig</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMap.html#a42978d763977cb16d2d7aabbc17686ba">map_config_</a></td></tr>
<tr class="memdesc:a42978d763977cb16d2d7aabbc17686ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">The map settings.  <a href="#a42978d763977cb16d2d7aabbc17686ba">More...</a><br /></td></tr>
<tr class="separator:a42978d763977cb16d2d7aabbc17686ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27afd9706c6dfd73308e7f61ec15982e"><td class="memItemLeft" align="right" valign="top">std::list&lt; <a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeIndex.html">MapNodeIndex</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMap.html#a27afd9706c6dfd73308e7f61ec15982e">map_nodes_disk_</a></td></tr>
<tr class="memdesc:a27afd9706c6dfd73308e7f61ec15982e"><td class="mdescLeft">&#160;</td><td class="mdescRight">All the map nodes in the Map (in the disk).  <a href="#a27afd9706c6dfd73308e7f61ec15982e">More...</a><br /></td></tr>
<tr class="separator:a27afd9706c6dfd73308e7f61ec15982e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f2c6a49e855194bdec5e2f5ff3a40d2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeCache.html">MapNodeCache</a>&lt; <a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeIndex.html">MapNodeIndex</a>, <a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMapNode.html">BaseMapNode</a> &gt;::DestroyFunc&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMap.html#a7f2c6a49e855194bdec5e2f5ff3a40d2">destroy_func_lvl1_</a></td></tr>
<tr class="separator:a7f2c6a49e855194bdec5e2f5ff3a40d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcaab66079cb701e44171a29fc2bd212"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeCache.html">MapNodeCache</a>&lt; <a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeIndex.html">MapNodeIndex</a>, <a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMapNode.html">BaseMapNode</a> &gt;::DestroyFunc&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMap.html#afcaab66079cb701e44171a29fc2bd212">destroy_func_lvl2_</a></td></tr>
<tr class="separator:afcaab66079cb701e44171a29fc2bd212"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af67691174666729636cdc4d1b94dd4e4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeCache.html">MapNodeCache</a>&lt; <a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeIndex.html">MapNodeIndex</a>, <a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMapNode.html">BaseMapNode</a> &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMap.html#af67691174666729636cdc4d1b94dd4e4">map_node_cache_lvl1_</a></td></tr>
<tr class="memdesc:af67691174666729636cdc4d1b94dd4e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The cache for map node preload.  <a href="#af67691174666729636cdc4d1b94dd4e4">More...</a><br /></td></tr>
<tr class="separator:af67691174666729636cdc4d1b94dd4e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4a10400c33821b1f487fe2525750d29"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeCache.html">MapNodeCache</a>&lt; <a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeIndex.html">MapNodeIndex</a>, <a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMapNode.html">BaseMapNode</a> &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMap.html#ab4a10400c33821b1f487fe2525750d29">map_node_cache_lvl2_</a></td></tr>
<tr class="separator:ab4a10400c33821b1f487fe2525750d29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcfbdc1e3e364396e3178b3ea9df2a41"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMapNodePool.html">BaseMapNodePool</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMap.html#abcfbdc1e3e364396e3178b3ea9df2a41">map_node_pool_</a></td></tr>
<tr class="memdesc:abcfbdc1e3e364396e3178b3ea9df2a41"><td class="mdescLeft">&#160;</td><td class="mdescRight">The map node memory pool pointer.  <a href="#abcfbdc1e3e364396e3178b3ea9df2a41">More...</a><br /></td></tr>
<tr class="separator:abcfbdc1e3e364396e3178b3ea9df2a41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab86ae55f4d9050dd92cca963660a457c"><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeIndex.html">MapNodeIndex</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMap.html#ab86ae55f4d9050dd92cca963660a457c">map_preloading_task_index_</a></td></tr>
<tr class="separator:ab86ae55f4d9050dd92cca963660a457c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae231c9af589fa84eb34f056e0dbcdd6"><td class="memItemLeft" align="right" valign="top">boost::recursive_mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMap.html#aae231c9af589fa84eb34f056e0dbcdd6">map_load_mutex_</a></td></tr>
<tr class="memdesc:aae231c9af589fa84eb34f056e0dbcdd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The mutex for preload map node.  <a href="#aae231c9af589fa84eb34f056e0dbcdd6">More...</a><br /></td></tr>
<tr class="separator:aae231c9af589fa84eb34f056e0dbcdd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The data structure of the base map. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ad8447972a3be27ddc71dde7e4a146407"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8447972a3be27ddc71dde7e4a146407">&#9670;&nbsp;</a></span>BaseMap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">apollo::localization::msf::BaseMap::BaseMap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMapConfig.html">BaseMapConfig</a> *&#160;</td>
          <td class="paramname"><em>map_config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The constructor. </p>

</div>
</div>
<a id="a40fc1c2afcba1ecd8ec39a770962163b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40fc1c2afcba1ecd8ec39a770962163b">&#9670;&nbsp;</a></span>~BaseMap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual apollo::localization::msf::BaseMap::~BaseMap </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The destructor. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a22cf8470ad5fd8bde9157ec0a89bc31f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22cf8470ad5fd8bde9157ec0a89bc31f">&#9670;&nbsp;</a></span>AddDataset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void apollo::localization::msf::BaseMap::AddDataset </td>
          <td>(</td>
          <td class="paramtype">const std::string&#160;</td>
          <td class="paramname"><em>dataset_path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a dataset path to the map config. </p>

</div>
</div>
<a id="a79699d9bc4edb50def3a9fd02a704dbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79699d9bc4edb50def3a9fd02a704dbe">&#9670;&nbsp;</a></span>AttachMapNodePool()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void apollo::localization::msf::BaseMap::AttachMapNodePool </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMapNodePool.html">BaseMapNodePool</a> *&#160;</td>
          <td class="paramname"><em>p_map_node_pool</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attach map node pointer. </p>

</div>
</div>
<a id="a5a8727c45d433058515c0b7a274abb5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a8727c45d433058515c0b7a274abb5f">&#9670;&nbsp;</a></span>GetConfig() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMapConfig.html">BaseMapConfig</a>&amp; apollo::localization::msf::BaseMap::GetConfig </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the map config. </p>

</div>
</div>
<a id="ad918c401af56adfe6f8579d21149fcbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad918c401af56adfe6f8579d21149fcbf">&#9670;&nbsp;</a></span>GetConfig() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMapConfig.html">BaseMapConfig</a>&amp; apollo::localization::msf::BaseMap::GetConfig </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the map config. </p>

</div>
</div>
<a id="a26dc0bdfe44b29f872af6f09a8272676"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26dc0bdfe44b29f872af6f09a8272676">&#9670;&nbsp;</a></span>GetMapNode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMapNode.html">BaseMapNode</a>* apollo::localization::msf::BaseMap::GetMapNode </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeIndex.html">MapNodeIndex</a> &amp;&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the map node, if it's not in the cache, return false. </p>

</div>
</div>
<a id="a26a8465b14b43b83a39408371d1837db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26a8465b14b43b83a39408371d1837db">&#9670;&nbsp;</a></span>GetMapNodeSafe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMapNode.html">BaseMapNode</a>* apollo::localization::msf::BaseMap::GetMapNodeSafe </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeIndex.html">MapNodeIndex</a> &amp;&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the map node, if it's not in the cache, safely load it. </p>

</div>
</div>
<a id="aa8fe3c29347bcba53f82c79e3547cc3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8fe3c29347bcba53f82c79e3547cc3a">&#9670;&nbsp;</a></span>InitMapNodeCaches()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void apollo::localization::msf::BaseMap::InitMapNodeCaches </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cacheL1_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cahceL2_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Init load threadpool and preload threadpool. </p>

</div>
</div>
<a id="ac3f589d02e2797a038890b00924dc127"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3f589d02e2797a038890b00924dc127">&#9670;&nbsp;</a></span>IsMapNodeExist()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool apollo::localization::msf::BaseMap::IsMapNodeExist </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeIndex.html">MapNodeIndex</a> &amp;&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if the map node in the cache. </p>

</div>
</div>
<a id="a8bc0e828631218152a384446e3cec296"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bc0e828631218152a384446e3cec296">&#9670;&nbsp;</a></span>LoadBinary()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void apollo::localization::msf::BaseMap::LoadBinary </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>map_folder_path</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load all the map nodes from a single binary file stream. It's for binary streaming or packing. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">&lt;map_folder_path&gt;</td><td>The new map folder path to save the map. </td></tr>
    <tr><td class="paramname">&lt;return&gt;</td><td>The size read (the real size of body). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a698a0daf6f739cacd41595b449a44cc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a698a0daf6f739cacd41595b449a44cc7">&#9670;&nbsp;</a></span>LoadMapArea()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool apollo::localization::msf::BaseMap::LoadMapArea </td>
          <td>(</td>
          <td class="paramtype">const Eigen::Vector3d &amp;&#160;</td>
          <td class="paramname"><em>seed_pt3d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>resolution_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>zone_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>filter_size_x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>filter_size_y</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Load map nodes for the location calculate of this frame. If the forecasts are correct in last frame, these nodes will be all in cache, if not, then need to create loading tasks, and wait for the loading finish, in order to the nodes which the following calculate needed are all in the memory, eigen version. </p>

<p>Reimplemented in <a class="el" href="classapollo_1_1localization_1_1msf_1_1LosslessMap.html#a8a0ebe7cd814c398bbd1ff86c4a06342">apollo::localization::msf::LosslessMap</a>, <a class="el" href="classapollo_1_1localization_1_1msf_1_1NdtMap.html#a68dd07e7e10c0f46f266f775942ebbf0">apollo::localization::msf::NdtMap</a>, and <a class="el" href="classapollo_1_1localization_1_1msf_1_1LossyMap2D.html#acdadfa359b0f9b4bfafd07b01e5eeb21">apollo::localization::msf::LossyMap2D</a>.</p>

</div>
</div>
<a id="ab69df09d4e885a2ab68372cedfd7359e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab69df09d4e885a2ab68372cedfd7359e">&#9670;&nbsp;</a></span>LoadMapNodes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void apollo::localization::msf::BaseMap::LoadMapNodes </td>
          <td>(</td>
          <td class="paramtype">std::set&lt; <a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeIndex.html">MapNodeIndex</a> &gt; *&#160;</td>
          <td class="paramname"><em>map_ids</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Load map node by index. </p>

</div>
</div>
<a id="ae1f57a2b18ec5c61c60e6281fc313aa3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1f57a2b18ec5c61c60e6281fc313aa3">&#9670;&nbsp;</a></span>LoadMapNodeThreadSafety()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void apollo::localization::msf::BaseMap::LoadMapNodeThreadSafety </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeIndex.html">MapNodeIndex</a>&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_reserved</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Load map node by index, thread_safety. </p>

</div>
</div>
<a id="a660769d0dee5a5ad1ce9d54570b5ea1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a660769d0dee5a5ad1ce9d54570b5ea1c">&#9670;&nbsp;</a></span>PreloadMapArea()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void apollo::localization::msf::BaseMap::PreloadMapArea </td>
          <td>(</td>
          <td class="paramtype">const Eigen::Vector3d &amp;&#160;</td>
          <td class="paramname"><em>location</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Eigen::Vector3d &amp;&#160;</td>
          <td class="paramname"><em>trans_diff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>resolution_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>zone_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Preload map nodes for the next frame location calculation. It will forecasts the nodes by the direction of the car moving. Because the progress of loading will cost a long time (over 100ms), it must do this for a period of time in advance. After the index of nodes calculate finished, it will create loading tasks, but will not wait for the loading finished, eigen version. </p>

<p>Reimplemented in <a class="el" href="classapollo_1_1localization_1_1msf_1_1LosslessMap.html#a4b52ef95d2846e53d1cd03af4cf2ebd9">apollo::localization::msf::LosslessMap</a>, <a class="el" href="classapollo_1_1localization_1_1msf_1_1NdtMap.html#aca38be552617394d170209c55ff475c4">apollo::localization::msf::NdtMap</a>, and <a class="el" href="classapollo_1_1localization_1_1msf_1_1LossyMap2D.html#a596814142705ff651c15136cecb13337">apollo::localization::msf::LossyMap2D</a>.</p>

</div>
</div>
<a id="ab8b00f3ec91ebde20dda20f527b43765"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8b00f3ec91ebde20dda20f527b43765">&#9670;&nbsp;</a></span>PreloadMapNodes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void apollo::localization::msf::BaseMap::PreloadMapNodes </td>
          <td>(</td>
          <td class="paramtype">std::set&lt; <a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeIndex.html">MapNodeIndex</a> &gt; *&#160;</td>
          <td class="paramname"><em>map_ids</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Load map node by index. </p>

</div>
</div>
<a id="ab3401cf69c718282a85bd06d93c16c08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3401cf69c718282a85bd06d93c16c08">&#9670;&nbsp;</a></span>SetMapFolderPath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool apollo::localization::msf::BaseMap::SetMapFolderPath </td>
          <td>(</td>
          <td class="paramtype">const std::string&#160;</td>
          <td class="paramname"><em>folder_path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the directory of the map. </p>

</div>
</div>
<a id="a41e63827d7214731fcc6a6d97bee906d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41e63827d7214731fcc6a6d97bee906d">&#9670;&nbsp;</a></span>WriteBinary()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void apollo::localization::msf::BaseMap::WriteBinary </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write all the map nodes to a single binary file stream. It's for binary streaming or packing. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">&lt;buf,buf_size&gt;</td><td>The buffer and its size. </td></tr>
    <tr><td class="paramname">&lt;return&gt;</td><td>The required or the used size of is returned. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a7f2c6a49e855194bdec5e2f5ff3a40d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f2c6a49e855194bdec5e2f5ff3a40d2">&#9670;&nbsp;</a></span>destroy_func_lvl1_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeCache.html">MapNodeCache</a>&lt;<a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeIndex.html">MapNodeIndex</a>, <a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMapNode.html">BaseMapNode</a>&gt;::DestroyFunc apollo::localization::msf::BaseMap::destroy_func_lvl1_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="afcaab66079cb701e44171a29fc2bd212"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcaab66079cb701e44171a29fc2bd212">&#9670;&nbsp;</a></span>destroy_func_lvl2_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeCache.html">MapNodeCache</a>&lt;<a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeIndex.html">MapNodeIndex</a>, <a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMapNode.html">BaseMapNode</a>&gt;::DestroyFunc apollo::localization::msf::BaseMap::destroy_func_lvl2_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a42978d763977cb16d2d7aabbc17686ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42978d763977cb16d2d7aabbc17686ba">&#9670;&nbsp;</a></span>map_config_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMapConfig.html">BaseMapConfig</a>* apollo::localization::msf::BaseMap::map_config_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The map settings. </p>

</div>
</div>
<a id="aae231c9af589fa84eb34f056e0dbcdd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae231c9af589fa84eb34f056e0dbcdd6">&#9670;&nbsp;</a></span>map_load_mutex_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::recursive_mutex apollo::localization::msf::BaseMap::map_load_mutex_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The mutex for preload map node. </p>

</div>
</div>
<a id="af67691174666729636cdc4d1b94dd4e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af67691174666729636cdc4d1b94dd4e4">&#9670;&nbsp;</a></span>map_node_cache_lvl1_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeCache.html">MapNodeCache</a>&lt;<a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeIndex.html">MapNodeIndex</a>, <a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMapNode.html">BaseMapNode</a>&gt;* apollo::localization::msf::BaseMap::map_node_cache_lvl1_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The cache for map node preload. </p>

</div>
</div>
<a id="ab4a10400c33821b1f487fe2525750d29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4a10400c33821b1f487fe2525750d29">&#9670;&nbsp;</a></span>map_node_cache_lvl2_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeCache.html">MapNodeCache</a>&lt;<a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeIndex.html">MapNodeIndex</a>, <a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMapNode.html">BaseMapNode</a>&gt;* apollo::localization::msf::BaseMap::map_node_cache_lvl2_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>brief The dynamic map node preloading thread pool pointer. </p>

</div>
</div>
<a id="abcfbdc1e3e364396e3178b3ea9df2a41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcfbdc1e3e364396e3178b3ea9df2a41">&#9670;&nbsp;</a></span>map_node_pool_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classapollo_1_1localization_1_1msf_1_1BaseMapNodePool.html">BaseMapNodePool</a>* apollo::localization::msf::BaseMap::map_node_pool_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The map node memory pool pointer. </p>

</div>
</div>
<a id="a27afd9706c6dfd73308e7f61ec15982e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27afd9706c6dfd73308e7f61ec15982e">&#9670;&nbsp;</a></span>map_nodes_disk_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt;<a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeIndex.html">MapNodeIndex</a>&gt; apollo::localization::msf::BaseMap::map_nodes_disk_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>All the map nodes in the Map (in the disk). </p>

</div>
</div>
<a id="ab86ae55f4d9050dd92cca963660a457c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab86ae55f4d9050dd92cca963660a457c">&#9670;&nbsp;</a></span>map_preloading_task_index_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;<a class="el" href="classapollo_1_1localization_1_1msf_1_1MapNodeIndex.html">MapNodeIndex</a>&gt; apollo::localization::msf::BaseMap::map_preloading_task_index_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Keep the index of preloading nodes. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>modules/localization/msf/local_map/base_map/<a class="el" href="local__map_2base__map_2base__map_8h_source.html">base_map.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
